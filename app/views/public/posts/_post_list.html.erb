<h3 class="mb-4">ÊäïÁ®ø‰∏ÄË¶ß</h3>

<% if show_create_button %>
  <%= link_to "Êñ∞Ë¶èÊäïÁ®ø", new_post_path, class: "btn btn-success mb-3" %>
<% end %>

<% if user.posts.exists? %>
  <div class="timeline">
    <% user.posts.order(created_at: :desc).limit(10).each do |post| %>
      <div class="timeline-item d-flex mb-4 p-3 border rounded">
        <!-- „Ç¢„Ç§„Ç≥„É≥ÈÉ®ÂàÜ -->
        <div class="timeline-icon mr-3" style="font-size: 2rem; color: #007bff;">
          <i class="fas fa-pen"></i>
        </div>
        <!-- ÊäïÁ®øÂÜÖÂÆπÈÉ®ÂàÜ -->
        <div class="timeline-content flex-grow-1">
          <h5 class="mb-1">
            <%= link_to post.title, post_path(post), class: "text-dark font-weight-bold" %>
          </h5>
          <p class="text-muted small">
            <%= time_ago_in_words(post.created_at) %>
            (<%= post.created_at.strftime("%YÂπ¥%mÊúà%dÊó• %H:%M") %>)
          </p>
          
          <%# „Ç´„ÉÜ„Ç¥„É™„ÉºË°®Á§∫ %>
          <% if post.category.present? %>
            <p class="mb-1">
              <strong>„Ç´„ÉÜ„Ç¥„É™:</strong>
              <span class="badge badge-primary ml-1"><%= post.category %></span>
            </p>
          <% end %>
          
          <%# „Çø„Ç∞Ë°®Á§∫ÔºàActsAsTaggableOn „Çí‰ΩøÁî®„Åó„Åü tag_listÔºâ %>
          <% if post.tag_list.present? %>
            <p class="mb-1">
              <strong>„Çø„Ç∞:</strong>
              <% post.tag_list.each do |tag| %>
                <%= link_to tag, posts_path(tag: tag), class: "badge badge-info mr-1" %>
              <% end %>
            </p>
          <% end %>
          
          <% visible_text = post.content.truncate(50) %>
          <p><%= visible_text %></p>
          <% if post.content.length > 50 %>
            <%= link_to "Á∂ö„Åç„ÇíË™≠„ÇÄ", post_path(post), class: "btn btn-link text-primary p-0" %>
          <% end %>

          <div class="post-actions mt-2">
            <span class="mr-3">üëç <%= post.likes.count %> „ÅÑ„ÅÑ„Å≠</span>
            <span class="mr-3">üí¨ <%= post.comments.count %> „Ç≥„É°„É≥„Éà</span>
            <% if show_edit_button %>
              <%= link_to "Á∑®ÈõÜ", edit_post_path(post), class: "btn btn-outline-secondary btn-sm" %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <!-- ÊäïÁ®ø‰ª∂Êï∞„Åå10‰ª∂„ÇíË∂Ö„Åà„ÇãÂ†¥Âêà„ÅÆ„Äå„ÇÇ„Å£„Å®Ë™≠„ÇÄ„Äç„É™„É≥„ÇØ -->
  <% if user.posts.count > 10 %>
    <div class="text-center">
      <%= link_to "„ÇÇ„Å£„Å®Ë™≠„ÇÄ", posts_user_path(user), class: "btn btn-outline-primary" %>
    </div>
  <% end %>
<% else %>
  <p class="text-muted">ÊäïÁ®ø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ</p>
<% end %>